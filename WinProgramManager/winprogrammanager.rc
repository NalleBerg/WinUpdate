#include <windows.h>
#include "resource.h"
#include <commctrl.h>

// Application icon
IDI_APP_ICON ICON "wpm_logo.ico"

// Accelerator table
IDR_ACCELERATOR1 ACCELERATORS
BEGIN
    "W", ID_ACCEL_QUIT, VIRTKEY, CONTROL
END

// Logo bitmap (PNG)
IDB_PNG1 RCDATA "wpm_logo.png"

// Loading dialog
IDD_LOADING_DIALOG DIALOGEX 0, 0, 250, 85
STYLE DS_MODALFRAME | DS_CENTER | WS_POPUP | WS_CAPTION
CAPTION ""
FONT 9, "Segoe UI", 700
BEGIN
    ICON            32516, IDC_LOADING_ICON, 15, 15, 21, 20
    LTEXT           "", IDC_LOADING_TEXT, 45, 15, 190, 30, SS_CENTER | SS_NOPREFIX
    LTEXT           "", IDC_LOADING_ANIMATE, 45, 43, 190, 30, SS_CENTER
END

// Search dialog
IDD_SEARCH_DIALOG DIALOGEX 0, 0, 450, 280
STYLE DS_MODALFRAME | DS_CENTER | WS_POPUP | WS_CAPTION | WS_SYSMENU
CAPTION "Search"
FONT 9, "Segoe UI"
BEGIN
    LTEXT           "Search in Categories:", -1, 10, 10, 430, 10
    EDITTEXT        IDC_SEARCH_CATEGORY, 10, 22, 430, 14, ES_AUTOHSCROLL
    
    LTEXT           "Search in Applications:", -1, 10, 45, 430, 10
    EDITTEXT        IDC_SEARCH_APP, 10, 57, 430, 14, ES_AUTOHSCROLL
    
    GROUPBOX        "Search Options", -1, 10, 80, 430, 75
    
    AUTORADIOBUTTON "Case Insensitive", IDC_CASE_INSENSITIVE, 20, 95, 100, 10, WS_GROUP
    AUTORADIOBUTTON "Case Sensitive", IDC_CASE_SENSITIVE, 130, 95, 100, 10
    
    AUTORADIOBUTTON "Contains", IDC_CONTAINS, 20, 110, 100, 10, WS_GROUP
    AUTORADIOBUTTON "Exact Match", IDC_EXACT_MATCH, 130, 110, 100, 10
    
    AUTOCHECKBOX    "Use Regular Expression", IDC_USE_REGEX, 20, 125, 150, 10
    
    AUTORADIOBUTTON "Search All", IDC_SEARCH_ALL, 20, 140, 100, 10, WS_GROUP
    AUTORADIOBUTTON "Refine Previous Results", IDC_REFINE_RESULTS, 130, 140, 150, 10
    
    LTEXT           "Leave category search empty to search all categories.\nLeave application search empty to show all applications in filtered categories.", -1, 10, 165, 430, 20
    
    DEFPUSHBUTTON   "Search", IDOK, 285, 250, 70, 20
    PUSHBUTTON      "Cancel", IDCANCEL, 365, 250, 70, 20
END

// App details dialog
IDD_APP_DETAILS DIALOGEX 0, 0, 500, 276
STYLE DS_MODALFRAME | DS_CENTER | WS_POPUP | WS_CAPTION | WS_SYSMENU
CAPTION "Application Details"
FONT 11, "Segoe UI"
BEGIN
    // Icon (left side, 50x50)
    CONTROL         "", IDC_APP_ICON, "Static", SS_ICON | SS_CENTERIMAGE, 12, 12, 50, 50
    
    // App name (large, bold via code)
    LTEXT           "App Name", IDC_APP_NAME, 150, 12, 340, 20, SS_NOPREFIX
    
    // Publisher
    LTEXT           "Publisher:", IDC_LABEL_PUBLISHER, 150, 35, 60, 10
    LTEXT           "...", IDC_APP_PUBLISHER, 215, 35, 275, 10
    
    // Version
    LTEXT           "Version:", IDC_LABEL_VERSION, 150, 48, 60, 10
    LTEXT           "...", IDC_APP_VERSION, 215, 48, 120, 10
    
    // Package ID (right after icon with just 2 pixels gap)
    LTEXT           "Package ID:", IDC_LABEL_PACKAGE_ID, 12, 64, 60, 10
    LTEXT           "...", IDC_APP_PACKAGE_ID, 75, 64, 415, 10, SS_NOPREFIX
    
    // Source
    LTEXT           "Source:", IDC_LABEL_SOURCE, 12, 79, 60, 10
    LTEXT           "...", IDC_APP_SOURCE, 75, 79, 100, 10
    
    // Install status
    LTEXT           "Status:", IDC_LABEL_STATUS, 12, 94, 60, 10
    LTEXT           "Not Installed", IDC_APP_STATUS, 75, 94, 200, 10
    
    // Description (multi-line, scrollable)
    GROUPBOX        "Description", IDC_GROUPBOX_DESCRIPTION, 12, 111, 476, 56
    EDITTEXT        IDC_APP_DESCRIPTION, 20, 126, 460, 34, ES_MULTILINE | ES_READONLY | ES_AUTOVSCROLL | WS_VSCROLL
    
    // Technical details
    GROUPBOX        "Technical Information", IDC_GROUPBOX_TECHNICAL, 12, 172, 476, 50
    LTEXT           "Homepage:", IDC_LABEL_HOMEPAGE, 20, 187, 60, 10
    EDITTEXT        IDC_APP_HOMEPAGE, 85, 187, 395, 10, ES_READONLY | ES_AUTOHSCROLL
    LTEXT           "License:", IDC_LABEL_LICENSE, 20, 200, 60, 10
    LTEXT           "...", IDC_APP_LICENSE, 85, 200, 130, 10
    LTEXT           "Installer Type:", IDC_LABEL_INSTALLER_TYPE, 230, 200, 60, 10
    LTEXT           "...", IDC_APP_INSTALLER, 295, 200, 80, 10
    LTEXT           "Architecture:", IDC_LABEL_ARCHITECTURE, 385, 200, 50, 10
    LTEXT           "...", IDC_APP_ARCH, 440, 200, 40, 10
    
    // Tags (single line with proper width to show all text)
    LTEXT           "Tags:", IDC_LABEL_TAGS, 12, 229, 30, 10
    EDITTEXT        IDC_APP_TAGS, 45, 225, 443, 24, ES_MULTILINE | ES_AUTOHSCROLL | WS_HSCROLL
    
    // Buttons (owner-drawn for consistent styling)
    CONTROL         "", IDC_BTN_INSTALL, "Button", BS_OWNERDRAW | WS_TABSTOP, 12, 254, 70, 14
    CONTROL         "", IDC_BTN_REINSTALL, "Button", BS_OWNERDRAW | WS_TABSTOP, 12, 254, 70, 14
    CONTROL         "", IDC_BTN_UNINSTALL, "Button", BS_OWNERDRAW | WS_TABSTOP, 88, 254, 70, 14
    CONTROL         "", IDOK, "Button", BS_OWNERDRAW | WS_TABSTOP, 418, 254, 70, 14
END

// Confirmation dialog for install/uninstall operations
IDD_CONFIRM_ACTION DIALOG 0, 0, 300, 110
STYLE DS_SETFONT | DS_MODALFRAME | WS_POPUP | WS_CAPTION | WS_SYSMENU
CAPTION "Confirm Action"
FONT 8, "MS Shell Dlg"
BEGIN
    LTEXT           "Confirmation message", IDC_CONFIRM_MESSAGE, 14, 14, 272, 40
    DEFPUSHBUTTON   "OK", IDOK, 135, 80, 70, 14
    PUSHBUTTON      "Cancel", IDCANCEL, 215, 80, 70, 14
END

// Version information
VS_VERSION_INFO VERSIONINFO
FILEVERSION 1,0,0,0
PRODUCTVERSION 1,0,0,0
FILEFLAGSMASK 0x3fL
FILEFLAGS 0x0L
FILEOS VOS_NT_WINDOWS32
FILETYPE VFT_APP
FILESUBTYPE 0x0L
BEGIN
    BLOCK "StringFileInfo"
    BEGIN
        BLOCK "040904b0"
        BEGIN
            VALUE "CompanyName", "NalleBerg"
            VALUE "FileDescription", "Windows Program Manager"
            VALUE "FileVersion", "1.0.0.0"
            VALUE "InternalName", "WinProgramManager"
            VALUE "LegalCopyright", "Copyright (C) 2026"
            VALUE "OriginalFilename", "WinProgramManager.exe"
            VALUE "ProductName", "WinProgram Manager"
            VALUE "ProductVersion", "1.0.0.0"
        END
    END
    BLOCK "VarFileInfo"
    BEGIN
        VALUE "Translation", 0x409, 1200
    END
END
